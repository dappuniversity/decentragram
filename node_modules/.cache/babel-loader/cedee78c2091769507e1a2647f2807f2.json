{"ast":null,"code":"var ClientRequest = require('./request');\n\nvar IncomingMessage = require('./incoming-message');\n\nvar statusCodes = require('builtin-status-codes');\n\nvar URL = self.URL;\n\nvar request = function request(opts, cb) {\n  if (typeof opts === 'string') {\n    opts = new URL(opts, self.location.protocol + '//' + self.location.host);\n    opts.path = opts.pathname + opts.search;\n    opts.auth = opts.username && opts.password ? opts.username + ':' + opts.password : null;\n  } else {\n    opts = Object.assign({}, opts);\n  } // Normally, the page is loaded from http or https, so not specifying a protocol\n  // will result in a (valid) protocol-relative url. However, this won't work if\n  // the protocol is something else, like 'file:'\n\n\n  var defaultProtocol = global.location.protocol.search(/^https?:$/) === -1 ? 'http:' : '';\n  var protocol = opts.protocol || defaultProtocol;\n  var host = opts.hostname || opts.host;\n  var port = opts.port;\n  var path = opts.path || '/'; // Necessary for IPv6 addresses\n\n  if (host && host.indexOf(':') !== -1) host = '[' + host + ']'; // This may be a relative url. The browser should always be able to interpret it correctly.\n\n  opts.url = (host ? protocol + '//' + host : '') + (port ? ':' + port : '') + path;\n  opts.method = (opts.method || 'GET').toUpperCase();\n  opts.headers = opts.headers || {}; // Also valid opts.auth, opts.mode\n\n  var req = new ClientRequest(opts);\n  if (cb) req.on('response', cb);\n  return req;\n};\n\nvar get = function get(opts, cb) {\n  var req = request(opts, cb);\n  req.end();\n  return req;\n};\n\nvar Agent = function Agent() {};\n\nAgent.defaultMaxSockets = 4;\nvar METHODS = ['CHECKOUT', 'CONNECT', 'COPY', 'DELETE', 'GET', 'HEAD', 'LOCK', 'M-SEARCH', 'MERGE', 'MKACTIVITY', 'MKCOL', 'MOVE', 'NOTIFY', 'OPTIONS', 'PATCH', 'POST', 'PROPFIND', 'PROPPATCH', 'PURGE', 'PUT', 'REPORT', 'SEARCH', 'SUBSCRIBE', 'TRACE', 'UNLOCK', 'UNSUBSCRIBE'];\nmodule.exports = {\n  Agent: Agent,\n  ClientRequest: ClientRequest,\n  IncomingMessage: IncomingMessage,\n  METHODS: METHODS,\n  STATUS_CODES: statusCodes,\n  get: get,\n  globalAgent: new Agent(),\n  request: request,\n  maxHeaderSize: '8KB'\n};","map":null,"metadata":{},"sourceType":"script"}