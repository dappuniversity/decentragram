{"ast":null,"code":"'use strict';\n\nfunction id(e) {\n  return e;\n}\n\nvar prop = require('../util/prop');\n\nmodule.exports = function map(mapper) {\n  if (!mapper) return id;\n  mapper = prop(mapper);\n  return function (read) {\n    return function (abort, cb) {\n      read(abort, function (end, data) {\n        try {\n          data = !end ? mapper(data) : null;\n        } catch (err) {\n          return read(err, function () {\n            return cb(err);\n          });\n        }\n\n        cb(end, data);\n      });\n    };\n  };\n};","map":null,"metadata":{},"sourceType":"script"}