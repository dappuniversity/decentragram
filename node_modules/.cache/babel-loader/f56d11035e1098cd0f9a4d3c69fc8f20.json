{"ast":null,"code":"'use strict';\n\nvar _classCallCheck = require(\"C:\\\\Users\\\\30698\\\\DecentraBook\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"C:\\\\Users\\\\30698\\\\DecentraBook\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/createClass\");\n\nvar _possibleConstructorReturn = require(\"C:\\\\Users\\\\30698\\\\DecentraBook\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"C:\\\\Users\\\\30698\\\\DecentraBook\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"C:\\\\Users\\\\30698\\\\DecentraBook\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/inherits\");\n\nvar _require = require('readable-stream'),\n    Readable = _require.Readable;\n\nvar _require2 = require('../supports'),\n    supportsFileReader = _require2.supportsFileReader;\n\nvar streamFromFileReader = function streamFromFileReader(file, options) {\n  if (!supportsFileReader) {\n    throw new Error('FileReader DOM API is not supported.');\n  }\n\n  var FileStream =\n  /*#__PURE__*/\n  function (_Readable) {\n    _inherits(FileStream, _Readable);\n\n    function FileStream(file) {\n      var _this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      _classCallCheck(this, FileStream);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(FileStream).call(this, options));\n      _this.file = file;\n      _this.offset = options.offset || 0;\n      _this.chunkSize = options.chunkSize || 1024 * 1024;\n      _this.fileReader = new self.FileReader(file);\n\n      _this.fileReader.onloadend = function (event) {\n        var data = event.target.result;\n\n        if (data.byteLength === 0) {\n          _this.push(null);\n        }\n\n        _this.push(new Uint8Array(data));\n      };\n\n      _this.fileReader.onerror = function (err) {\n        return _this.destroy(err);\n      };\n\n      return _this;\n    }\n\n    _createClass(FileStream, [{\n      key: \"_read\",\n      value: function _read(size) {\n        var end = this.offset + this.chunkSize;\n        var slice = file.slice(this.offset, end);\n        this.fileReader.readAsArrayBuffer(slice);\n        this.offset = end;\n      }\n    }]);\n\n    return FileStream;\n  }(Readable);\n\n  return new FileStream(file, options);\n};\n\nmodule.exports = streamFromFileReader;","map":null,"metadata":{},"sourceType":"script"}