{"ast":null,"code":"module.exports = function () {\n  var read, reader, cb, abort, stream;\n\n  function delayed(_read) {\n    //if we already have the stream, go!\n    if (stream) return stream(_read);\n    read = _read;\n    return function (_abort, _cb) {\n      if (reader) reader(_abort, _cb);else abort = _abort, cb = _cb;\n    };\n  }\n\n  delayed.resolve = function (_stream) {\n    if (stream) throw new Error('already resolved');\n    stream = _stream;\n    if (!stream) throw new Error('resolve *must* be passed a transform stream');\n\n    if (read) {\n      reader = stream(read);\n      if (cb) reader(abort, cb);\n    }\n  };\n\n  return delayed;\n};","map":null,"metadata":{},"sourceType":"script"}