{"ast":null,"code":"/* global self */\n'use strict';\n\nvar nodeify = require('nodeify');\n\nvar webCrypto = getWebCrypto();\n\nfunction getWebCrypto() {\n  if (self.crypto) {\n    return self.crypto.subtle || self.crypto.webkitSubtle;\n  }\n\n  if (self.msCrypto) {\n    return self.msCrypto.subtle;\n  }\n}\n\nfunction webCryptoHash(type) {\n  if (!webCrypto) {\n    throw new Error('Please use a browser with webcrypto support and ensure the code has been delivered securely via HTTPS/TLS and run within a Secure Context');\n  }\n\n  return function (data, callback) {\n    var res = webCrypto.digest({\n      name: type\n    }, data);\n\n    if (typeof res.then !== 'function') {\n      // IE11\n      res.onerror = function () {\n        callback(new Error(\"hashing data using \".concat(type)));\n      };\n\n      res.oncomplete = function (e) {\n        callback(null, e.target.result);\n      };\n\n      return;\n    }\n\n    nodeify(res.then(function (raw) {\n      return Buffer.from(new Uint8Array(raw));\n    }), callback);\n  };\n}\n\nfunction sha1(buf, callback) {\n  webCryptoHash('SHA-1')(buf, callback);\n}\n\nfunction sha2256(buf, callback) {\n  webCryptoHash('SHA-256')(buf, callback);\n}\n\nfunction sha2512(buf, callback) {\n  webCryptoHash('SHA-512')(buf, callback);\n}\n\nmodule.exports = {\n  sha1: sha1,\n  sha2256: sha2256,\n  sha2512: sha2512\n};","map":null,"metadata":{},"sourceType":"script"}