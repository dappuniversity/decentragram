{"ast":null,"code":"(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('web3-utils'), require('ethers/utils/abi-coder'), require('@babel/runtime/helpers/classCallCheck'), require('@babel/runtime/helpers/createClass'), require('lodash/isArray'), require('lodash/isObject')) : typeof define === 'function' && define.amd ? define(['exports', 'web3-utils', 'ethers/utils/abi-coder', '@babel/runtime/helpers/classCallCheck', '@babel/runtime/helpers/createClass', 'lodash/isArray', 'lodash/isObject'], factory) : (global = global || self, factory(global.Web3EthAbi = {}, global.Utils, global.abiCoder, global._classCallCheck, global._createClass, global.isArray, global.isObject));\n})(this, function (exports, Utils, abiCoder, _classCallCheck, _createClass, isArray, isObject) {\n  'use strict';\n\n  _classCallCheck = _classCallCheck && _classCallCheck.hasOwnProperty('default') ? _classCallCheck['default'] : _classCallCheck;\n  _createClass = _createClass && _createClass.hasOwnProperty('default') ? _createClass['default'] : _createClass;\n  isArray = isArray && isArray.hasOwnProperty('default') ? isArray['default'] : isArray;\n  isObject = isObject && isObject.hasOwnProperty('default') ? isObject['default'] : isObject;\n\n  var AbiCoder = function () {\n    function AbiCoder(utils, ethersAbiCoder) {\n      _classCallCheck(this, AbiCoder);\n\n      this.utils = utils;\n      this.ethersAbiCoder = ethersAbiCoder;\n    }\n\n    _createClass(AbiCoder, [{\n      key: \"encodeFunctionSignature\",\n      value: function encodeFunctionSignature(functionName) {\n        if (isObject(functionName)) {\n          functionName = this.utils.jsonInterfaceMethodToString(functionName);\n        }\n\n        return this.utils.keccak256(functionName).slice(0, 10);\n      }\n    }, {\n      key: \"encodeEventSignature\",\n      value: function encodeEventSignature(functionName) {\n        if (isObject(functionName)) {\n          functionName = this.utils.jsonInterfaceMethodToString(functionName);\n        }\n\n        return this.utils.keccak256(functionName);\n      }\n    }, {\n      key: \"encodeParameter\",\n      value: function encodeParameter(type, param) {\n        return this.encodeParameters([type], [param]);\n      }\n    }, {\n      key: \"encodeParameters\",\n      value: function encodeParameters(types, params) {\n        return this.ethersAbiCoder.encode(types, params);\n      }\n    }, {\n      key: \"encodeFunctionCall\",\n      value: function encodeFunctionCall(jsonInterface, params) {\n        return this.encodeFunctionSignature(jsonInterface) + this.encodeParameters(jsonInterface.inputs, params).replace('0x', '');\n      }\n    }, {\n      key: \"decodeParameter\",\n      value: function decodeParameter(type, bytes) {\n        return this.decodeParameters([type], bytes)[0];\n      }\n    }, {\n      key: \"decodeParameters\",\n      value: function decodeParameters(outputs, bytes) {\n        if (isArray(outputs) && outputs.length === 0) {\n          throw new Error('Empty outputs array given!');\n        }\n\n        if (!bytes || bytes === '0x' || bytes === '0X') {\n          throw new Error(\"Invalid bytes string given: \".concat(bytes));\n        }\n\n        var result = this.ethersAbiCoder.decode(outputs, bytes);\n        var returnValues = {};\n        var decodedValue;\n\n        if (isArray(result)) {\n          if (outputs.length > 1) {\n            outputs.forEach(function (output, i) {\n              decodedValue = result[i];\n\n              if (decodedValue === '0x') {\n                decodedValue = null;\n              }\n\n              returnValues[i] = decodedValue;\n\n              if (isObject(output) && output.name) {\n                returnValues[output.name] = decodedValue;\n              }\n            });\n            return returnValues;\n          }\n\n          return result;\n        }\n\n        if (isObject(outputs[0]) && outputs[0].name) {\n          returnValues[outputs[0].name] = result;\n        }\n\n        returnValues[0] = result;\n        return returnValues;\n      }\n    }, {\n      key: \"decodeLog\",\n      value: function decodeLog(inputs) {\n        var _this = this;\n\n        var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n        var topics = arguments.length > 2 ? arguments[2] : undefined;\n        var returnValues = {};\n        var topicCount = 0;\n        var value;\n        var nonIndexedInputKeys = [];\n        var nonIndexedInputItems = [];\n\n        if (!isArray(topics)) {\n          topics = [topics];\n        }\n\n        inputs.forEach(function (input, i) {\n          if (input.indexed) {\n            if (input.type === 'string') {\n              return;\n            }\n\n            value = topics[topicCount];\n\n            if (_this.isStaticType(input.type)) {\n              value = _this.decodeParameter(input.type, topics[topicCount]);\n            }\n\n            returnValues[i] = value;\n            returnValues[input.name] = value;\n            topicCount++;\n            return;\n          }\n\n          nonIndexedInputKeys.push(i);\n          nonIndexedInputItems.push(input);\n        });\n\n        if (data) {\n          var values = this.decodeParameters(nonIndexedInputItems, data);\n          var decodedValue;\n          nonIndexedInputKeys.forEach(function (itemKey, index) {\n            decodedValue = values[index];\n            returnValues[itemKey] = decodedValue;\n            returnValues[nonIndexedInputItems[index].name] = decodedValue;\n          });\n        }\n\n        return returnValues;\n      }\n    }, {\n      key: \"isStaticType\",\n      value: function isStaticType(type) {\n        if (type === 'bytes') {\n          return false;\n        }\n\n        if (type === 'string') {\n          return false;\n        }\n\n        if (type.indexOf('[') && type.slice(type.indexOf('[')).length === 2) {\n          return false;\n        }\n\n        return true;\n      }\n    }]);\n\n    return AbiCoder;\n  }();\n\n  function AbiCoder$1() {\n    return new AbiCoder(Utils, new abiCoder.AbiCoder());\n  }\n\n  exports.AbiCoder = AbiCoder$1;\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n});","map":null,"metadata":{},"sourceType":"script"}